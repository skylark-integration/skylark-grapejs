/**
 * skylark-grapejs - A version of garpejs that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-grapejs/
 * @license MIT
 */
define(["skylark-underscore"],function(e){"use strict";const t={4:"media",5:"font-face",6:"page",7:"keyframes",11:"counter-style",12:"supports",13:"document",14:"font-feature-values",15:"viewport"},r=e.keys(t),s=["5","6","11","15"],n=["font-face","page","counter-style","viewport"],o=(e="")=>{const t=[],r=[],s=e.split(",");for(var n=0,o=s.length;n<o;n++){var l=s[n].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(l)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(l)){var a=l.split(".").filter(Boolean);r.push(a)}else t.push(l)}return{result:r,add:t}},l=e=>{const t=e.style,r={};for(var s=0,n=t.length;s<n;s++){const e=t[s],n=t.getPropertyValue(e),o=t.getPropertyPriority(e);r[e]=`${n}${o?` !${o}`:""}`}return r},a=e=>{return(e.conditionText||e.media&&e.media.mediaText||e.name||e.selectorText||"").trim()},i=(e,t={},r={})=>{const s={},o=e.length,l=e[o-1],a=l?l.split(/:(.+)/):[],i=a[1],{atRule:c,selectorsAdd:d,mediaText:u}=r;return n.indexOf(c)>=0&&(s.singleAtRule=1),c&&(s.atRuleType=c),d&&(s.selectorsAdd=d),u&&(s.mediaText=u),i&&(e[o-1]=a[0],s.state=i,a.splice(a.length-1,1)),s.selectors=e,s.style=t,s},c=e=>{for(var n=[],d=e.cssRules||[],u=0,p=d.length;u<p;u++){const e=d[u],p=e.type.toString();let x=0,R="",w="",A=e.selectorText||e.keyText;const k=s.indexOf(p)>=0;if(k)x=1,R=t[p],w=a(e);else if(r.indexOf(p)>=0){var f=c(e);w=a(e);for(var m=0,y=f.length;m<y;m++){var g=f[m];w&&(g.mediaText=w),g.atRuleType=t[p]}n=n.concat(f)}if(!A&&!k)continue;const $=l(e),C=o(A),O=C.add;let P;for(var h=0,v=(A=C.result).length;h<v;h++){const e=i(A[h],$,{atRule:t[p]});n.push(e),P=e}if(O.length){var T=O.join(", ");if(P)P.selectorsAdd=T;else{const e={selectors:[],selectorsAdd:T,style:$};x&&(e.singleAtRule=x),R&&(e.atRuleType=R),w&&(e.mediaText=w),n.push(e)}}}return n};var d=e=>{const t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t);const r=t.sheet;return document.head.removeChild(t),c(r)};return d.parseSelector=o,d.parseStyle=l,d.parseCondition=a,d.createNode=i,d.parseNode=c,d});
//# sourceMappingURL=../../sourcemaps/parser/model/BrowserParserCss.js.map
