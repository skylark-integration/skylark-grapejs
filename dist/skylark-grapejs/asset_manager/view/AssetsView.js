/**
 * skylark-grapejs - A version of garpejs that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-grapejs/
 * @license MIT
 */
define(["skylark-backbone"],function(t){"use strict";return t.View.extend({events:{submit:"handleSubmit"},template(){const{pfx:t,ppfx:s,em:e}=this;let i="";return this.config.showUrlInput&&(i=`\n          <form class="${t}add-asset">\n            <div class="${s}field ${t}add-field">\n              <input placeholder="${e&&e.t("assetManager.inputPlh")}"/>\n            </div>\n            <button class="${s}btn-prim">${e&&e.t("assetManager.addButton")}</button>\n            <div style="clear:both"></div>\n          </form>\n      `),`\n    <div class="${t}assets-cont">\n      <div class="${t}assets-header">\n        ${i}\n      </div>\n      <div class="${t}assets" data-el="assets"></div>\n      <div style="clear:both"></div>\n    </div>\n    `},initialize(t){this.options=t,this.config=t.config,this.pfx=this.config.stylePrefix||"",this.ppfx=this.config.pStylePrefix||"",this.em=this.config.em;const s=this.collection;this.listenTo(s,"reset",this.renderAssets),this.listenTo(s,"add",this.addToAsset),this.listenTo(s,"remove",this.removedAsset),this.listenTo(s,"deselectAll",this.deselectAll)},handleSubmit(t){t.preventDefault();const s=this.getAddInput(),e=s&&s.value.trim(),i=this.config.handleAdd;e&&(s.value="",this.getAssetsEl().scrollTop=0,i?i.bind(this)(e):this.options.globalCollection.add(e,{at:0}))},getAssetsEl(){return this.el.querySelector(`.${this.pfx}assets`)},getAddInput(){return this.inputUrl&&this.inputUrl.value||(this.inputUrl=this.el.querySelector(`.${this.pfx}add-asset input`)),this.inputUrl},removedAsset(t){this.collection.length||this.toggleNoAssets()},addToAsset(t){1==this.collection.length&&this.toggleNoAssets(1),this.addAsset(t)},addAsset(t,s=null){const e=s,i=this.collection,n=this.config,l=new t.typeView({model:t,collection:i,config:n}).render().el;if(e)e.appendChild(l);else{const t=this.getAssetsEl();t&&t.insertBefore(l,t.firstChild)}return l},toggleNoAssets(t){const s=this.$el.find(`.${this.pfx}assets`);if(t)s.empty();else{const t=this.config.noAssets;t&&s.append(t)}},deselectAll(){const t=this.pfx;this.$el.find(`.${t}highlight`).removeClass(`${t}highlight`)},renderAssets(){const t=document.createDocumentFragment(),s=this.$el.find(`.${this.pfx}assets`);s.empty(),this.toggleNoAssets(this.collection.length),this.collection.each(s=>this.addAsset(s,t)),s.append(t)},render(){const t=this.options.fu.render().el;return this.$el.empty(),this.$el.append(t).append(this.template(this)),this.el.className=`${this.ppfx}asset-manager`,this.renderAssets(),this.rendered=1,this}})});
//# sourceMappingURL=../../sourcemaps/asset_manager/view/AssetsView.js.map
