/**
 * skylark-grapejs - A version of garpejs that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-grapejs/
 * @license MIT
 */
define(["skylark-underscore","skylark-backbone","../../domain_abstract/model/Styleable","../../selector_manager/model/Selectors"],function(e,t,s,r){"use strict";const{CSS:i}=window;return t.Model.extend(s).extend({defaults:{selectors:{},selectorsAdd:"",style:{},mediaText:"",state:"",stylable:!0,atRuleType:"",singleAtRule:0,important:0},initialize(e,t={}){this.config=e||{};const s=t.em;let i=this.config.selectors||[];if(this.em=s,s){const e=s.get("SelectorManager"),t=[];i.undefined(s=>{t.push(e.add(s))}),i=t}this.set("selectors",new r(i))},getAtRule(){const e=this.get("atRuleType"),t=this.get("mediaText"),s=e?`@${e}`:t?"@media":"";return s+(t&&s?` ${t}`:"")},selectorsToString(e={}){const t=[],{em:s}=this,r=this.get("state"),l=this.get("wrapper"),o=this.get("selectorsAdd"),n={escape:e=>i&&i.escape?i.escape(e):e},a=l&&s&&s.getConfig("wrapperIsBody")?"body":this.get("selectors").getFullString(0,n),c=r&&!e.skipState?`:${r}`:"";return a&&t.push(`${a}${c}`),o&&!e.skipAdd&&t.push(o),t.join(", ")},getDeclaration(e={}){let t="";const s=this.selectorsToString(),r=this.styleToString(e),i=this.get("singleAtRule");return(s||i)&&r&&(t=i?r:`${s}{${r}}`),t},toCSS(e={}){let t="";const s=this.getAtRule(),r=this.getDeclaration(e);return r&&(t=r),s&&t&&(t=`${s}{${t}}`),t},toJSON(...s){const r=t.Model.prototype.toJSON.apply(this,s);if(this.em.getConfig("avoidDefaults")){const t=this.defaults;e.forEach(t,(e,t)=>{r[t]===e&&delete r[t]}),e.isEmpty(r.selectors)&&delete r.selectors,e.isEmpty(r.style)&&delete r.style}return r},compare(t,s,r,i={}){var l=s||"",o=r||"",n=i.selectorsAdd||"",a=i.atRuleType||"";t instanceof Array||t.models||(t=[t]);var c=e.map(t.models||t,e=>e.get("name")),d=e.map(this.get("selectors").models,e=>e.get("name"));if(c.length!==d.length)return!1;for(var g=0;g<c.length;g++){for(var h=0,u=0;u<d.length;u++)c[g]===d[u]&&(h=1);if(0===h)return!1}return this.get("state")===l&&this.get("mediaText")===o&&this.get("selectorsAdd")===n&&this.get("atRuleType")===a}})});
//# sourceMappingURL=../../sourcemaps/css_composer/model/CssRule.js.map
