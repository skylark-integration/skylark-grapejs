/**
 * skylark-grapejs - A version of garpejs that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-grapejs/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-backbone","skylark-underscore","../../utils/mixins"],function(t,e,i,n){"use strict";const s=e.Model.extend({defaults:{name:"",property:"",type:"",defaults:"",info:"",value:"",icon:"",functionName:"",status:"",visible:!0,fixedValues:["initial","inherit"],full:0,important:0,toRequire:0,requires:null,requiresParent:null},initialize(t={},e={}){const i=this.get("id")||"",a=this.get("name")||"";!this.get("property")&&this.set("property",(a||i).replace(/ /g,"-"));const l=this.get("property");!this.get("id")&&this.set("id",l),!a&&this.set("name",n.capitalize(l).replace(/-/g," ")),s.callInit(this,t,e)},init(){},clearValue(t={}){return this.set({value:void 0,status:""},t),this},setValue(e,i=1,n={}){const s=this.parseValue(e);this.set(s,t.mixin({},n,{avoidStore:!i}))},setValueFromInput(e,i,n={}){this.setValue(e,i,t.mixin({},n,{fromInput:1}))},parseValue(t,e={}){const n={value:t},s="!important";if(i.isString(t)&&-1!==t.indexOf(s)&&(n.value=t.replace(s,"").trim(),n.important=1),!this.get("functionName")&&!e.complete)return n;const a=[];let l=`${n.value}`,r=l.indexOf("(")+1,u=l.lastIndexOf(")");const o=l.substring(0,r-1);if(o&&(n.functionName=o),a.push(r),u>=0&&a.push(u),n.value=String.prototype.substring.apply(l,a),e.numeric){const t=parseFloat(n.value);n.unit=n.value.replace(t,""),n.value=t}return n},splitValues(t,e=","){const i=[];let n="",s=0;return(t||"").split("").forEach(t=>{"("==t?(s++,n+="("):")"==t&&s>0?(s--,n+=")"):t===e&&0==s?(i.push(n),n=""):n+=t}),""!==n&&i.push(n),i.map(t=>t.trim())},getDefaultValue(){return this.get("defaults")},getFullValue(t){const e=this.get("functionName"),n=this.getDefaultValue();let s=i.isUndefined(t)?this.get("value"):t;const a=!i.isUndefined(s)&&""!==s;return s&&n&&s===n?n:(e&&a&&(s=`${e}(${s})`),a&&this.get("important")&&(s=`${s} !important`),s||"")}},{callParentInit(e,i,n,s={}){e.prototype.initialize.apply(i,[n,t.mixin({},s,{skipInit:1})])},callInit(t,e,i={}){!i.skipInit&&t.init(e,i)}});return s});
//# sourceMappingURL=../../sourcemaps/style_manager/model/Property.js.map
