/**
 * skylark-grapejs - A version of garpejs that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-grapejs/
 * @license MIT
 */
define([],function(){var e,n={},t={16:!1,18:!1,17:!1,91:!1},r="all",o={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},i={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},l=function(e){return i[e]||e.toUpperCase().charCodeAt(0)},c=[];for(e=1;e<20;e++)i["f"+e]=111+e;function f(e,n){for(var t=e.length;t--;)if(e[t]===n)return t;return-1}function a(e,n){if(e.length!=n.length)return!1;for(var t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}var u={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function s(n){for(e in t)t[e]=n[u[e]]}function d(e,t,r){var o,i;o=h(e),void 0===r&&(r=t,t="all");for(var c=0;c<o.length;c++)i=[],(e=o[c].split("+")).length>1&&(i=g(e),e=[e[e.length-1]]),e=e[0],(e=l(e))in n||(n[e]=[]),n[e].push({shortcut:o[c],scope:t,method:r,key:o[c],mods:i})}for(e in o)d[e]=!1;function p(){return r||"all"}function h(e){var n;return""==(n=(e=e.replace(/\s/g,"")).split(","))[n.length-1]&&(n[n.length-2]+=","),n}function g(e){for(var n=e.slice(0,e.length-1),t=0;t<n.length;t++)n[t]=o[n[t]];return n}function v(e,n,t){e.addEventListener?e.addEventListener(n,t,!1):e.attachEvent&&e.attachEvent("on"+n,function(){t(window.event)})}return v(document,"keydown",function(e){!function(e){var r,i,l,a,u,h;if(r=e.keyCode,-1==f(c,r)&&c.push(r),93!=r&&224!=r||(r=91),r in t)for(l in t[r]=!0,o)o[l]==r&&(d[l]=!0);else if(s(e),d.filter.call(this,e)&&r in n)for(h=p(),a=0;a<n[r].length;a++)if((i=n[r][a]).scope==h||"all"==i.scope){for(l in u=i.mods.length>0,t)(!t[l]&&f(i.mods,+l)>-1||t[l]&&-1==f(i.mods,+l))&&(u=!1);(0!=i.mods.length||t[16]||t[18]||t[17]||t[91])&&!u||!1===i.method(e,i)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}(e)}),v(document,"keyup",function(e){var n,r=e.keyCode,i=f(c,r);if(i>=0&&c.splice(i,1),93!=r&&224!=r||(r=91),r in t)for(n in t[r]=!1,o)o[n]==r&&(d[n]=!1)}),v(window,"focus",function(){for(e in t)t[e]=!1;for(e in o)d[e]=!1}),d.setScope=function(e){r=e||"all"},d.getScope=p,d.deleteScope=function(e){var t,r,o;for(t in n)for(r=n[t],o=0;o<r.length;)r[o].scope===e?r.splice(o,1):o++},d.filter=function(e){var n=(e.target||e.srcElement).tagName;return!("INPUT"==n||"SELECT"==n||"TEXTAREA"==n)},d.isPressed=function(e){return"string"==typeof e&&(e=l(e)),-1!=f(c,e)},d.getPressedKeyCodes=function(){return c.slice(0)},d.unbind=function(e,t){var r,o,i,c,f,u=[];for(r=h(e),c=0;c<r.length;c++){if((o=r[c].split("+")).length>1&&(u=g(o),e=o[o.length-1]),e=l(e),void 0===t&&(t=p()),!n[e])return;for(i=0;i<n[e].length;i++)(f=n[e][i]).scope===t&&a(f.mods,u)&&(n[e][i]={})}},d});
//# sourceMappingURL=../sourcemaps/keymaps/keymaster.js.map
