{"version":3,"sources":["asset_manager/view/AssetImageView.js"],"names":["define","a","AssetView","extend","events","click [data-toggle=asset-remove]","click","dblclick","[object Object]","pfx","this","model","get","ppfx","name","width","height","unit","dim","getFilename","o","className","onClick","config","collection","trigger","$el","addClass","isFunction","updateTarget","target","em","onDblClick","close","onSelect","e","stopImmediatePropagation","remove"],"mappings":";;;;;;;AAAAA,QACI,qBACA,eACD,SAAUC,EAAGC,GACZ,aACA,OAAOA,EAAUC,QACbC,QACIC,mCAAoC,WACpCC,MAAO,UACPC,SAAU,cAEdC,aACI,MAAMC,EAAMC,KAAKD,IAEjB,6BACSA,2CAFGC,KAAKC,MAAMC,IAAI,wCAGlBH,eAAmBC,KAAKG,gCAGrCL,UACI,MAAMC,EAAMC,KAAKD,IACXE,EAAQD,KAAKC,MACnB,IAAIG,EAAOH,EAAMC,IAAI,QACjBG,EAAQJ,EAAMC,IAAI,SAClBI,EAASL,EAAMC,IAAI,UACnBK,EAAON,EAAMC,IAAI,WACjBM,EAAMH,GAASC,KAAaD,KAAWC,IAAWC,IAAU,GAEhE,6BACSR,UAFTK,EAAOA,GAAQH,EAAMQ,0CAGZV,gBAAoBS,iBAGjCV,KAAKY,GACD,MAAMX,EAAMC,KAAKD,IACjBC,KAAKW,eAAkBZ,gBAE3BD,UACI,IAAIc,EAAUZ,KAAKa,OAAOD,QACtBX,EAAQD,KAAKC,MACjBD,KAAKc,WAAWC,QAAQ,eACxBf,KAAKgB,IAAIC,SAASjB,KAAKD,IAAM,aACzBR,EAAE2B,WAAWN,GACbA,EAAQX,GAERD,KAAKmB,aAAanB,KAAKc,WAAWM,SAG1CtB,aACI,MAAMuB,GAACA,EAAEpB,MAAEA,GAASD,KACdsB,EAAatB,KAAKa,OAAOS,WAC3B/B,EAAE2B,WAAWI,GACbA,EAAWrB,IAEXD,KAAKmB,aAAanB,KAAKc,WAAWM,QAClCC,GAAMA,EAAGnB,IAAI,SAASqB,SAE1B,IAAIC,EAAWxB,KAAKc,WAAWU,SAC/BjC,EAAE2B,WAAWM,IAAaA,EAASvB,IAEvCH,SAAS2B,GACLA,EAAEC,2BACF1B,KAAKC,MAAMa,WAAWa,OAAO3B,KAAKC","file":"../../../asset_manager/view/AssetImageView.js","sourcesContent":["define([\n    'skylark-underscore',\n    './AssetView'\n], function (a, AssetView) {\n    'use strict';\n    return AssetView.extend({\n        events: {\n            'click [data-toggle=asset-remove]': 'onRemove',\n            click: 'onClick',\n            dblclick: 'onDblClick'\n        },\n        getPreview() {\n            const pfx = this.pfx;\n            const src = this.model.get('src');\n            return `\n      <div class=\"${ pfx }preview\" style=\"background-image: url('${ src }');\"></div>\n      <div class=\"${ pfx }preview-bg ${ this.ppfx }checker-bg\"></div>\n    `;\n        },\n        getInfo() {\n            const pfx = this.pfx;\n            const model = this.model;\n            let name = model.get('name');\n            let width = model.get('width');\n            let height = model.get('height');\n            let unit = model.get('unitDim');\n            let dim = width && height ? `${ width }x${ height }${ unit }` : '';\n            name = name || model.getFilename();\n            return `\n      <div class=\"${ pfx }name\">${ name }</div>\n      <div class=\"${ pfx }dimensions\">${ dim }</div>\n    `;\n        },\n        init(o) {\n            const pfx = this.pfx;\n            this.className += ` ${ pfx }asset-image`;\n        },\n        onClick() {\n            var onClick = this.config.onClick;\n            var model = this.model;\n            this.collection.trigger('deselectAll');\n            this.$el.addClass(this.pfx + 'highlight');\n            if (a.isFunction(onClick)) {\n                onClick(model);\n            } else {\n                this.updateTarget(this.collection.target);\n            }\n        },\n        onDblClick() {\n            const {em, model} = this;\n            const onDblClick = this.config.onDblClick;\n            if (a.isFunction(onDblClick)) {\n                onDblClick(model);\n            } else {\n                this.updateTarget(this.collection.target);\n                em && em.get('Modal').close();\n            }\n            var onSelect = this.collection.onSelect;\n            a.isFunction(onSelect) && onSelect(model);\n        },\n        onRemove(e) {\n            e.stopImmediatePropagation();\n            this.model.collection.remove(this.model);\n        }\n    });\n});"]}