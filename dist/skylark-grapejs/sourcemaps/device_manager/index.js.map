{"version":3,"sources":["device_manager/index.js"],"names":["define","langx","defaults","Devices","DevicesView","devices","view","c","name","[object Object]","config","forEach","dv","this","add","id","width","collection","opts","obj","mixin","get","getAll","render","el"],"mappings":";;;;;;;AAAAA,QACI,sBACA,kBACA,kBACA,sBACD,SAAUC,EAAMC,EAAUC,EAASC,GAClC,aACA,MAAO,KACH,IACIC,EAASC,EADTC,KAEJ,OACIC,KAAM,gBACNC,KAAKC,GAED,IAAK,IAAIF,KADTD,EAAIG,MACaR,EACPM,KAAQD,IACVA,EAAEC,GAAQN,EAASM,IAQ3B,OANAH,EAAU,IAAIF,GACbI,EAAEF,aAAeM,QAAQC,GAAMC,KAAKC,IAAIF,EAAGG,IAAMH,EAAGJ,KAAMI,EAAGI,MAAOJ,IACrEN,EAAO,IAAIF,GACPa,WAAYZ,EACZK,OAAQH,IAELM,MAEXJ,IAAIM,EAAIC,EAAOE,MACX,MAAMC,EAAMlB,EAAMmB,SAASF,GACvBH,GAAAA,EACAP,KAAMU,EAAKV,MAAQO,EACnBC,MAAOA,IAEX,OAAOX,EAAQS,IAAIK,IAEvBE,IAAIb,GACOH,EAAQgB,IAAIb,GAEvBc,OAAM,IACKjB,EAEXkB,OAAM,IACKjB,EAAKiB,SAASC","file":"../../device_manager/index.js","sourcesContent":["define([\n    \"skylark-langx/langx\",\n    './config/config',\n    './model/Devices',\n    './view/DevicesView'\n], function (langx,defaults, Devices, DevicesView) {\n    'use strict';\n    return () => {\n        var c = {};\n        var devices, view;\n        return {\n            name: 'DeviceManager',\n            init(config) {\n                c = config || {};\n                for (var name in defaults) {\n                    if (!(name in c))\n                        c[name] = defaults[name];\n                }\n                devices = new Devices();\n                (c.devices || []).forEach(dv => this.add(dv.id || dv.name, dv.width, dv));\n                view = new DevicesView({\n                    collection: devices,\n                    config: c\n                });\n                return this;\n            },\n            add(id, width, opts = {}) {\n                const obj = langx.mixin({},opts,{\n                    id,\n                    name: opts.name || id,\n                    width: width\n                });\n                return devices.add(obj);\n            },\n            get(name) {\n                return devices.get(name);\n            },\n            getAll() {\n                return devices;\n            },\n            render() {\n                return view.render().el;\n            }\n        };\n    };\n});"]}