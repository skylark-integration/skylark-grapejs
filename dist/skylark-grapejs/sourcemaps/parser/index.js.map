{"version":3,"sources":["parser/index.js"],"names":["define","langx","defaults","parserCss","parserHtml","pHtml","pCss","conf","compTypes","name","getConfig","[object Object]","config","Parser","this","em","str","get","getTypes","parse","parseCss"],"mappings":";;;;;;;AAAAA,QACI,sBACA,kBACA,oBACA,sBACD,SAAUC,EAAMC,EAAUC,EAAWC,GACpC,aACA,MAAO,KACH,IACIC,EAAOC,EADPC,KAEJ,OACIC,UAAW,GACXL,UAAW,KACXC,WAAY,KACZK,KAAM,SACNC,UAAS,IACEH,EAEXI,KAAKC,MAQD,OAPAL,MAAWL,KAAYU,IAClBC,OAASC,KACdT,EAASD,EAAWG,GACpBD,EAAOH,EAAUI,GACjBO,KAAKC,GAAKR,EAAKQ,GACfD,KAAKX,UAAYG,EACjBQ,KAAKV,WAAaC,EACXS,MAEXH,UAAUK,GACN,MAAMD,GAACA,EAAEP,UAAEA,GAAaM,KAExB,OADAT,EAAMG,UAAYO,EAAKA,EAAGE,IAAI,iBAAiBC,WAAaV,EACrDH,EAAMc,MAAMH,EAAKV,IAE5Bc,SAASJ,GACEV,EAAKa,MAAMH","file":"../../parser/index.js","sourcesContent":["define([\n    \"skylark-langx/langx\",\n    './config/config',\n    './model/ParserCss',\n    './model/ParserHtml'\n], function (langx,defaults, parserCss, parserHtml) {\n    'use strict';\n    return () => {\n        let conf = {};\n        let pHtml, pCss;\n        return {\n            compTypes: '',\n            parserCss: null,\n            parserHtml: null,\n            name: 'Parser',\n            getConfig() {\n                return conf;\n            },\n            init(config = {}) {\n                conf = {...defaults,...config};\n                conf.Parser = this;\n                pHtml =  parserHtml(conf);  // modified by lwf // new parserHtml(conf)\n                pCss = parserCss(conf); // modified by lwf  // new parserCss\n                this.em = conf.em;\n                this.parserCss = pCss;\n                this.parserHtml = pHtml;\n                return this;\n            },\n            parseHtml(str) {\n                const {em, compTypes} = this;\n                pHtml.compTypes = em ? em.get('DomComponents').getTypes() : compTypes;\n                return pHtml.parse(str, pCss);\n            },\n            parseCss(str) {\n                return pCss.parse(str);\n            }\n        };\n    };\n});"]}