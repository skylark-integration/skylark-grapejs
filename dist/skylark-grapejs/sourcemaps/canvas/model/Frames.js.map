{"version":3,"sources":["canvas/model/Frames.js"],"names":["define","a","Backbone","model","Collection","extend","[object Object]","bindAll","this","loadedItems","itemsToLoad","trigger","listenToLoadItems","length","on","forEach","item","itemLoaded"],"mappings":";;;;;;;AAAAA,QACI,qBACA,mBACA,WACD,SAAUC,EAAGC,EAAUC,GACtB,aACA,OAAOD,EAASE,WAAWC,QACvBF,MAAAA,EACAG,aACIL,EAAEM,QAAQC,KAAM,eAEpBF,aACIE,KAAKC,cACDD,KAAKC,aAAeD,KAAKE,cACzBF,KAAKG,QAAQ,cACbH,KAAKI,kBAAkB,KAG/BN,eACIE,KAAKC,YAAc,EACnBD,KAAKE,YAAcF,KAAKK,OACxBL,KAAKI,kBAAkB,IAE3BN,kBAAkBQ,GACdN,KAAKO,QAAQC,GAAQA,EAAKF,EAAK,KAAO,OAAO,SAAUN,KAAKS","file":"../../../canvas/model/Frames.js","sourcesContent":["define([\n    'skylark-underscore',\n    'skylark-backbone',\n    './Frame'\n], function (a, Backbone, model) {\n    'use strict';\n    return Backbone.Collection.extend({\n        model,\n        initialize() {\n            a.bindAll(this, 'itemLoaded');\n        },\n        itemLoaded() {\n            this.loadedItems++;\n            if (this.loadedItems >= this.itemsToLoad) {\n                this.trigger('loaded:all');\n                this.listenToLoadItems(0);\n            }\n        },\n        listenToLoad() {\n            this.loadedItems = 0;\n            this.itemsToLoad = this.length;\n            this.listenToLoadItems(1);\n        },\n        listenToLoadItems(on) {\n            this.forEach(item => item[on ? 'on' : 'off']('loaded', this.itemLoaded));\n        }\n    });\n});"]}