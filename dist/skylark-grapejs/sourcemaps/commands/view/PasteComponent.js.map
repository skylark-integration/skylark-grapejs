{"version":3,"sources":["commands/view/PasteComponent.js"],"names":["define","a","[object Object]","ed","clp","getModel","get","selected","getSelected","getSelectedAll","forEach","comp","coll","collection","at","indexOf","copyable","filter","cop","added","contains","add","clone","map","isArray","trigger","emitUpdate"],"mappings":";;;;;;;AAAAA,QAAQ,sBAAuB,SAAUC,GACrC,aACA,OACIC,IAAIC,GACA,MACMC,EADKD,EAAGE,WACCC,IAAI,aACbC,EAAWJ,EAAGK,cAChBJ,GAAOG,IACPJ,EAAGM,iBAAiBC,QAAQC,IACxB,IAAKA,EACD,OACJ,MAAMC,EAAOD,EAAKE,WACZC,EAAKF,EAAKG,QAAQJ,GAAQ,EAC1BK,EAAWZ,EAAIa,OAAOC,GAAOA,EAAIZ,IAAI,aAC3C,IAAIa,EAEAA,EADAlB,EAAEmB,SAAShB,EAAKO,IAASA,EAAKL,IAAI,YAC1BM,EAAKS,IAAIV,EAAKW,SAAWR,GAAAA,IAEzBF,EAAKS,IAAIL,EAASO,IAAIL,GAAOA,EAAII,UAAYR,GAAAA,KAEzDK,EAAQlB,EAAEuB,QAAQL,GAASA,GAASA,IAC9BT,QAAQW,GAAOlB,EAAGsB,QAAQ,kBAAmBJ,MAEvDd,EAASmB","file":"../../../commands/view/PasteComponent.js","sourcesContent":["define(['skylark-underscore'], function (a) {\n    'use strict';\n    return {\n        run(ed) {\n            const em = ed.getModel();\n            const clp = em.get('clipboard');\n            const selected = ed.getSelected();\n            if (clp && selected) {\n                ed.getSelectedAll().forEach(comp => {\n                    if (!comp)\n                        return;\n                    const coll = comp.collection;\n                    const at = coll.indexOf(comp) + 1;\n                    const copyable = clp.filter(cop => cop.get('copyable'));\n                    let added;\n                    if (a.contains(clp, comp) && comp.get('copyable')) {\n                        added = coll.add(comp.clone(), { at });\n                    } else {\n                        added = coll.add(copyable.map(cop => cop.clone()), { at });\n                    }\n                    added = a.isArray(added) ? added : [added];\n                    added.forEach(add => ed.trigger('component:paste', add));\n                });\n                selected.emitUpdate();\n            }\n        }\n    };\n});"]}