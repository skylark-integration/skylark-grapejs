{"version":3,"sources":["commands/view/OpenStyleManager.js"],"names":["define","Backbone","StyleManager","$","[object Object]","em","sender","this","$cn","config","getConfig","panels","Panels","$cn2","append","dvm","DeviceManager","showDevices","addPanel","id","set","render","trigger","clm","SelectorManager","pfx","stylePrefix","$header","t","getPanel","panel","target","editor","listenTo","toggleSm","get","componentFirst","selectedAll","getSelectedAll","length","show","hide"],"mappings":";;;;;;;AAAAA,QACI,mBACA,6BACD,SAAUC,EAAUC,GACnB,aACA,MAAMC,EAAIF,EAASE,EACnB,OACIC,IAAIC,EAAIC,GAEJ,GADAC,KAAKD,OAASA,GACTC,KAAKC,IAAK,CACX,IAAIC,EAASJ,EAAGK,YAAaC,EAASN,EAAGO,OACzCL,KAAKC,IAAML,EAAE,eACbI,KAAKM,KAAOV,EAAE,eACdI,KAAKC,IAAIM,OAAOP,KAAKM,MACrB,IAAIE,EAAMV,EAAGW,cACb,GAAID,GAAON,EAAOQ,YACIN,EAAOO,UAAWC,GAAI,cAC5BC,IAAI,gBAAiBL,EAAIM,UAAUC,QAAQ,wBAE3D,IAAIC,EAAMlB,EAAGmB,gBACTD,GACAhB,KAAKM,KAAKC,OAAOS,EAAIF,YACzBd,KAAKM,KAAKC,OAAOT,EAAGH,aAAamB,UAEjC,MAAMI,EADSpB,EAAGH,aAAaQ,YACVgB,YACrBnB,KAAKoB,QAAUxB,iBAAkBsB,YAAgBpB,EAAGuB,EAAE,+BACtDrB,KAAKC,IAAIM,OAAOP,KAAKoB,SAChBhB,EAAOkB,SAAS,mBAGjBtB,KAAKuB,MAAQnB,EAAOkB,SAAS,mBAF7BtB,KAAKuB,MAAQnB,EAAOO,UAAWC,GAAI,oBAGvCZ,KAAKuB,MAAMV,IAAI,gBAAiBb,KAAKC,KAAKc,QAAQ,wBAClDf,KAAKwB,OAAS1B,EAAG2B,OACjBzB,KAAK0B,SAAS1B,KAAKwB,OAAQ,oBAAqBxB,KAAK2B,UAEzD3B,KAAK2B,YAET9B,WACI,MAAM2B,OAACA,EAAMzB,OAAEA,GAAUC,KACzB,GAAID,GAAUA,EAAO6B,MAAQ7B,EAAO6B,IAAI,UACpC,OACJ,MAAMC,eAACA,GAAkBL,EAAOI,IAAI,mBAAmBzB,YACjD2B,EAAcN,EAAOO,iBAAiBC,OACxB,IAAhBF,GAAqBA,EAAc,GAAKD,GACxC7B,KAAKM,KAAK2B,OACVjC,KAAKoB,QAAQc,SAEblC,KAAKM,KAAK4B,OACVlC,KAAKoB,QAAQa,SAGrBpC,OACQG,KAAKM,MACLN,KAAKM,KAAK4B,OACVlC,KAAKoB,SACLpB,KAAKoB,QAAQc","file":"../../../commands/view/OpenStyleManager.js","sourcesContent":["define([\n    'skylark-backbone',\n    '../../style_manager/index'\n], function (Backbone, StyleManager) {\n    'use strict';\n    const $ = Backbone.$;\n    return {\n        run(em, sender) {\n            this.sender = sender;\n            if (!this.$cn) {\n                var config = em.getConfig(), panels = em.Panels;\n                this.$cn = $('<div></div>');\n                this.$cn2 = $('<div></div>');\n                this.$cn.append(this.$cn2);\n                var dvm = em.DeviceManager;\n                if (dvm && config.showDevices) {\n                    var devicePanel = panels.addPanel({ id: 'devices-c' });\n                    devicePanel.set('appendContent', dvm.render()).trigger('change:appendContent');\n                }\n                var clm = em.SelectorManager;\n                if (clm)\n                    this.$cn2.append(clm.render([]));\n                this.$cn2.append(em.StyleManager.render());\n                var smConfig = em.StyleManager.getConfig();\n                const pfx = smConfig.stylePrefix;\n                this.$header = $(`<div class=\"${ pfx }header\">${ em.t('styleManager.empty') }</div>`);\n                this.$cn.append(this.$header);\n                if (!panels.getPanel('views-container'))\n                    this.panel = panels.addPanel({ id: 'views-container' });\n                else\n                    this.panel = panels.getPanel('views-container');\n                this.panel.set('appendContent', this.$cn).trigger('change:appendContent');\n                this.target = em.editor;\n                this.listenTo(this.target, 'component:toggled', this.toggleSm);\n            }\n            this.toggleSm();\n        },\n        toggleSm() {\n            const {target, sender} = this;\n            if (sender && sender.get && !sender.get('active'))\n                return;\n            const {componentFirst} = target.get('SelectorManager').getConfig();\n            const selectedAll = target.getSelectedAll().length;\n            if (selectedAll === 1 || selectedAll > 1 && componentFirst) {\n                this.$cn2.show();\n                this.$header.hide();\n            } else {\n                this.$cn2.hide();\n                this.$header.show();\n            }\n        },\n        stop() {\n            if (this.$cn2)\n                this.$cn2.hide();\n            if (this.$header)\n                this.$header.hide();\n        }\n    };\n});"]}