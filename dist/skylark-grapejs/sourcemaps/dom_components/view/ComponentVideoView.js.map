{"version":3,"sources":["dom_components/view/ComponentVideoView.js"],"names":["define","ComponentView","OComponentView","extend","tagName","events","[object Object]","o","prototype","initialize","apply","this","arguments","model","map","p","join","listenTo","updateProvider","updateSrc","updateVideo","prov","get","el","innerHTML","appendChild","renderByProvider","videoEl","src","getYoutubeSrc","getYoutubeNoCookieSrc","getVimeoSrc","md","trigger","loop","autoplay","controls","poster","renderYoutube","renderYoutubeNoCookie","renderVimeo","renderSource","document","createElement","initVideoEl","frameBorder","setAttribute","className","ppfx","style","height","width","args","render","updateClasses"],"mappings":"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","file":"../../../dom_components/view/ComponentVideoView.js","sourcesContent":["define([\n    './ComponentImageView',\n    './ComponentView'\n], function (ComponentView, OComponentView) {\n    'use strict';\n    return ComponentView.extend({\n        tagName: 'div',\n        events: {},\n        initialize(o) {\n            OComponentView.prototype.initialize.apply(this, arguments);\n            const {model} = this;\n            const props = [\n                'loop',\n                'autoplay',\n                'controls',\n                'color',\n                'rel',\n                'modestbranding',\n                'poster'\n            ];\n            const events = props.map(p => `change:${ p }`).join(' ');\n            this.listenTo(model, 'change:provider', this.updateProvider);\n            this.listenTo(model, 'change:src', this.updateSrc);\n            this.listenTo(model, events, this.updateVideo);\n        },\n        updateProvider() {\n            var prov = this.model.get('provider');\n            this.el.innerHTML = '';\n            this.el.appendChild(this.renderByProvider(prov));\n        },\n        updateSrc() {\n            const {model, videoEl} = this;\n            if (!videoEl)\n                return;\n            const prov = model.get('provider');\n            let src = model.get('src');\n            switch (prov) {\n            case 'yt':\n                src = model.getYoutubeSrc();\n                break;\n            case 'ytnc':\n                src = model.getYoutubeNoCookieSrc();\n                break;\n            case 'vi':\n                src = model.getVimeoSrc();\n                break;\n            }\n            videoEl.src = src;\n        },\n        updateVideo() {\n            var prov = this.model.get('provider');\n            var videoEl = this.videoEl;\n            var md = this.model;\n            switch (prov) {\n            case 'yt':\n            case 'ytnc':\n            case 'vi':\n                this.model.trigger('change:videoId');\n                break;\n            default:\n                videoEl.loop = md.get('loop');\n                videoEl.autoplay = md.get('autoplay');\n                videoEl.controls = md.get('controls');\n                videoEl.poster = md.get('poster');\n            }\n        },\n        renderByProvider(prov) {\n            var videoEl;\n            switch (prov) {\n            case 'yt':\n                videoEl = this.renderYoutube();\n                break;\n            case 'ytnc':\n                videoEl = this.renderYoutubeNoCookie();\n                break;\n            case 'vi':\n                videoEl = this.renderVimeo();\n                break;\n            default:\n                videoEl = this.renderSource();\n            }\n            this.videoEl = videoEl;\n            return videoEl;\n        },\n        renderSource() {\n            var el = document.createElement('video');\n            el.src = this.model.get('src');\n            this.initVideoEl(el);\n            return el;\n        },\n        renderYoutube() {\n            var el = document.createElement('iframe');\n            el.src = this.model.getYoutubeSrc();\n            el.frameBorder = 0;\n            el.setAttribute('allowfullscreen', true);\n            this.initVideoEl(el);\n            return el;\n        },\n        renderYoutubeNoCookie() {\n            var el = document.createElement('iframe');\n            el.src = this.model.getYoutubeNoCookieSrc();\n            el.frameBorder = 0;\n            el.setAttribute('allowfullscreen', true);\n            this.initVideoEl(el);\n            return el;\n        },\n        renderVimeo() {\n            var el = document.createElement('iframe');\n            el.src = this.model.getVimeoSrc();\n            el.frameBorder = 0;\n            el.setAttribute('allowfullscreen', true);\n            this.initVideoEl(el);\n            return el;\n        },\n        initVideoEl(el) {\n            el.className = this.ppfx + 'no-pointer';\n            el.style.height = '100%';\n            el.style.width = '100%';\n        },\n        render(...args) {\n            ComponentView.prototype.render.apply(this, args);\n            this.updateClasses();\n            var prov = this.model.get('provider');\n            this.el.appendChild(this.renderByProvider(prov));\n            this.updateVideo();\n            return this;\n        }\n    });\n});"]}