{"version":3,"sources":["dom_components/view/ComponentScriptView.js"],"names":["define","Backbone","ComponentView","extend","tagName","events","[object Object]","model","this","src","get","em","scriptCount","content","onload","svar","svarNext","set","el","innerHTML"],"mappings":";;;;;;;AAAAA,QACI,mBACA,wBACD,SAAUC,EAAUC,GACnB,aACA,OAAOA,EAAcC,QACjBC,QAAS,SACTC,UACAC,SACI,IAAIC,EAAQC,KAAKD,MACbE,EAAMF,EAAMG,IAAI,OAChBC,EAAKH,KAAKG,GACVC,EAAcD,GAAMA,EAAGD,IAAI,eAAiBC,EAAGD,IAAI,eAAiB,EACpEG,EAAU,GACd,GAAIJ,EAAK,CACL,IAAIK,EAASP,EAAMG,IAAI,UACnBK,EAAO,SAAWH,EAClBI,EAAW,UAAYJ,EAAc,GACzCC,EAAU,OAASE,EAAO,yCAA2CA,EAAO,2BAA6BD,EAASA,EAAS,QAAU,IAAM,UAAYE,EAAW,0BAA4BA,EAAW,iBAAwBD,EAAO,WAAaN,EAAM,gBAAuBM,EAAO,uCAAyCA,EAAO,WAAcH,EAAkC,GAApBG,EAAO,YACxWJ,GACAA,EAAGM,IAAI,cAAeL,EAAc,QAGxCC,EAAUN,EAAMG,IAAI,WAGxB,OADAF,KAAKU,GAAGC,UAAYN,EACbL","file":"../../../dom_components/view/ComponentScriptView.js","sourcesContent":["define([\n    'skylark-backbone',\n    './ComponentImageView'\n], function (Backbone, ComponentView) {\n    'use strict';\n    return ComponentView.extend({\n        tagName: 'script',\n        events: {},\n        render() {\n            var model = this.model;\n            var src = model.get('src');\n            var em = this.em;\n            var scriptCount = em && em.get('scriptCount') ? em.get('scriptCount') : 0;\n            var content = '';\n            if (src) {\n                var onload = model.get('onload');\n                var svar = 'script' + scriptCount;\n                var svarNext = 'script' + (scriptCount + 1);\n                content = 'var ' + svar + \" = document.createElement('script');\\n\" + svar + '.onload = function(){\\n' + (onload ? onload + '();\\n' : '') + 'typeof ' + svarNext + \"Start == 'function' && \" + svarNext + 'Start();\\n' + '};\\n' + svar + \".src = '\" + src + \"';\\n\" + 'function ' + svar + 'Start() { document.body.appendChild(' + svar + '); };\\n' + (!scriptCount ? svar + 'Start();' : '');\n                if (em) {\n                    em.set('scriptCount', scriptCount + 1);\n                }\n            } else {\n                content = model.get('content');\n            }\n            this.el.innerHTML = content;\n            return this;\n        }\n    });\n});"]}