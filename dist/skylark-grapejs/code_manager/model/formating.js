/**
 * skylark-grapejs - A version of garpejs that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-grapejs/
 * @license MIT
 */
define(["skylark-codemirror/CodeMirror"],function(e){e.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(e,t){return/^[;{}]$/.test(t)}}),e.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(e,t,n,o){return this.jsonMode?/^[\[,{]$/.test(t)||/^}/.test(n):(";"!=t||!o.lexical||")"!=o.lexical.type)&&(/^[;{}]$/.test(t)&&!/^;/.test(n))}});var t=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;e.extendMode("xml",{commentStart:"\x3c!--",commentEnd:"--\x3e",newlineAfterToken:function(e,n,o,r){var a=!1;return"html"==this.configuration&&(a=!!r.context&&t.test(r.context.tagName)),!a&&("tag"==e&&/>$/.test(n)&&r.context||/^</.test(o))}}),e.defineExtension("commentRange",function(t,n,o){var r=this,a=e.innerMode(r.getMode(),r.getTokenAt(n).state).mode;r.operation(function(){if(t)r.replaceRange(a.commentEnd,o),r.replaceRange(a.commentStart,n),n.line==o.line&&n.ch==o.ch&&r.setCursor(n.line,n.ch+a.commentStart.length);else{var e=r.getRange(n,o),i=e.indexOf(a.commentStart),s=e.lastIndexOf(a.commentEnd);i>-1&&s>-1&&s>i&&(e=e.substr(0,i)+e.substring(i+a.commentStart.length,s)+e.substr(s+a.commentEnd.length)),r.replaceRange(e,n,o)}})}),e.defineExtension("autoIndentRange",function(e,t){var n=this;this.operation(function(){for(var o=e.line;o<=t.line;o++)n.indentLine(o,"smart")})}),e.defineExtension("autoFormatRange",function(t,n){var o=this,r=o.getMode(),a=o.getRange(t,n).split("\n"),i=e.copyState(r,o.getTokenAt(t).state),s=o.getOption("tabSize"),c="",m=0,l=0===t.ch;function d(){c+="\n",l=!0,++m}for(var g=0;g<a.length;++g){for(var f=new e.StringStream(a[g],s);!f.eol();){var u=e.innerMode(r,i),p=r.token(f,i),b=f.current();f.start=f.pos,l&&!/\S/.test(b)||(c+=b,l=!1),!l&&u.mode.newlineAfterToken&&u.mode.newlineAfterToken(p,b,f.string.slice(f.pos)||a[g+1]||"",u.state)&&d()}!f.pos&&r.blankLine&&r.blankLine(i),!l&&g<a.length-1&&d()}o.operation(function(){o.replaceRange(c,t,n);for(var e=t.line+1,r=t.line+m;e<=r;++e)o.indentLine(e,"smart");o.setSelection(t,o.getCursor(!1))})})});
//# sourceMappingURL=../../sourcemaps/code_manager/model/formating.js.map
